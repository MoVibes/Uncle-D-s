<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Uncle D's Good Eats</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --olive-gold: #A89968;
            --olive-gold-dark: #8B7D4F;
            --forest-green: #3D5A3D;
            --forest-green-light: #4A6B4A;
            --lime-accent: #8B9A3B;
            --cream: #FAF9F6;
            --cream-dark: #F0EDE5;
            --charcoal: #2D2D2D;
            --shadow: rgba(61, 90, 61, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--cream);
            color: var(--charcoal);
        }

        /* Header */
        header {
            background: var(--olive-gold);
            padding: 0.75rem 1.5rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px var(--shadow);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        /* Logo Lockup */
        .logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            line-height: 1;
        }

        .logo-primary {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.4rem;
            color: var(--forest-green);
            letter-spacing: -0.5px;
            text-transform: uppercase;
            margin: 0;
        }

        .logo-divider {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin: 0.25rem 0 0.15rem 0;
            width: 100%;
        }

        .logo-divider::before,
        .logo-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--forest-green);
            opacity: 0.4;
        }

        .kentucky-icon {
            width: 22px;
            height: 10px;
            fill: var(--forest-green);
            opacity: 0.7;
            flex-shrink: 0;
        }

        .logo-secondary {
            font-family: 'Inter', sans-serif;
            font-size: 0.65rem;
            color: var(--cream);
            font-weight: 600;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }

        /* Search */
        .search-container {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.75rem;
            border: none;
            border-radius: 50px;
            font-size: 0.9rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.95);
            color: var(--charcoal);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .search-input::placeholder {
            color: #999;
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: var(--forest-green);
        }

        /* Header Right Section */
        .header-right {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        /* View Toggle */
        .view-toggle {
            display: flex;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            padding: 3px;
        }

        .view-toggle-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            background: transparent;
            color: var(--forest-green);
        }

        .view-toggle-btn.active {
            background: var(--cream);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .view-toggle-btn:not(.active):hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .view-toggle-btn svg {
            width: 16px;
            height: 16px;
        }

        .restaurant-count {
            background: var(--forest-green);
            color: var(--cream);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        /* Map Container */
        #map {
            position: fixed;
            top: 72px;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
            transition: opacity 0.3s ease;
        }

        #map.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* List View */
        #listView {
            position: fixed;
            top: 72px;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--cream);
            z-index: 2;
            overflow-y: auto;
            display: none;
            padding: 1.5rem;
        }

        #listView.active {
            display: block;
        }

        .list-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .list-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--cream-dark);
        }

        .list-header h2 {
            font-family: 'Archivo Black', sans-serif;
            color: var(--forest-green);
            font-size: 1.3rem;
        }

        .sort-select {
            padding: 0.5rem 1rem;
            border: 2px solid var(--cream-dark);
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            background: white;
            color: var(--charcoal);
            cursor: pointer;
        }

        .sort-select:focus {
            outline: none;
            border-color: var(--forest-green);
        }

        /* Restaurant Cards */
        .restaurant-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .restaurant-card {
            background: white;
            border-radius: 16px;
            padding: 1.25rem;
            box-shadow: 0 2px 12px var(--shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .restaurant-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--shadow);
            border-color: var(--olive-gold);
        }

        .restaurant-card:active {
            transform: translateY(0);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            background: var(--forest-green);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .card-icon svg {
            width: 24px;
            height: 24px;
            color: var(--cream);
        }

        .card-content {
            flex: 1;
            min-width: 0;
        }

        .card-content h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--forest-green);
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card-content p {
            font-size: 0.85rem;
            color: #666;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .card-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .card-btn svg {
            width: 18px;
            height: 18px;
        }

        .card-btn-map {
            background: var(--olive-gold);
            color: var(--forest-green);
        }

        .card-btn-map:hover {
            background: var(--olive-gold-dark);
            transform: scale(1.05);
        }

        .card-btn-directions {
            background: var(--cream-dark);
            color: var(--charcoal);
        }

        .card-btn-directions:hover {
            background: #E5E2DA;
            transform: scale(1.05);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #888;
        }

        .empty-state svg {
            width: 64px;
            height: 64px;
            color: var(--cream-dark);
            margin-bottom: 1rem;
        }

        .empty-state h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--charcoal);
        }

        /* Custom Popup Styling */
        .leaflet-popup-content-wrapper {
            border-radius: 16px;
            padding: 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .leaflet-popup-content {
            margin: 0;
            min-width: 260px;
        }

        .leaflet-popup-tip {
            background: var(--cream);
        }

        .popup-content {
            background: var(--cream);
        }

        .popup-header {
            background: var(--forest-green);
            padding: 1rem 1.25rem;
        }

        .popup-header h3 {
            color: var(--cream);
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
            line-height: 1.3;
        }

        .popup-body {
            padding: 1rem 1.25rem;
        }

        .popup-address {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            color: #666;
            font-size: 0.85rem;
            line-height: 1.4;
            margin-bottom: 1rem;
        }

        .popup-address svg {
            flex-shrink: 0;
            margin-top: 2px;
            color: var(--lime-accent);
        }

        .popup-actions {
            display: flex;
            gap: 0.5rem;
        }

        .popup-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            padding: 0.7rem 1rem;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .popup-btn-primary {
            background: var(--olive-gold);
            color: var(--forest-green);
        }

        .popup-btn-primary:hover {
            background: var(--olive-gold-dark);
            transform: translateY(-1px);
        }

        .popup-btn-secondary {
            background: var(--cream-dark);
            color: var(--charcoal);
        }

        .popup-btn-secondary:hover {
            background: #E5E2DA;
            transform: translateY(-1px);
        }

        /* Custom Marker */
        .custom-marker {
            background: var(--forest-green);
            border: 3px solid var(--cream);
            border-radius: 50% 50% 50% 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: rotate(-45deg);
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
        }

        .custom-marker:hover {
            transform: rotate(-45deg) scale(1.1);
        }

        .custom-marker svg {
            transform: rotate(45deg);
            width: 14px;
            height: 14px;
            color: var(--cream);
        }

        /* Search Results Dropdown */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 12px;
            margin-top: 0.5rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 1001;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s ease;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item:hover {
            background: var(--cream-dark);
        }

        .search-result-item h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--forest-green);
            margin-bottom: 0.2rem;
        }

        .search-result-item p {
            font-size: 0.75rem;
            color: #888;
        }

        .no-results {
            padding: 1rem;
            text-align: center;
            color: #888;
            font-size: 0.85rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            header {
                padding: 0.6rem 1rem;
            }

            .header-content {
                flex-wrap: wrap;
            }

            .logo {
                flex-direction: row;
                align-items: center;
                gap: 0.5rem;
            }

            .logo-primary {
                font-size: 1.1rem;
            }

            .logo-divider {
                width: auto;
                margin: 0;
            }

            .logo-divider::before,
            .logo-divider::after {
                display: none;
            }

            .kentucky-icon {
                width: 18px;
                height: 8px;
                fill: var(--forest-green);
                opacity: 0.6;
            }

            .logo-secondary {
                font-size: 0.5rem;
                letter-spacing: 0.15em;
                color: var(--cream);
            }

            .search-container {
                order: 3;
                max-width: 100%;
                width: 100%;
                margin-top: 0.5rem;
            }

            .header-right {
                gap: 0.5rem;
            }

            .view-toggle-btn {
                padding: 0.4rem 0.75rem;
                font-size: 0.75rem;
            }

            .view-toggle-btn span {
                display: none;
            }

            .restaurant-count {
                font-size: 0.75rem;
                padding: 0.4rem 0.8rem;
            }

            #map, #listView {
                top: 100px;
            }

            .leaflet-popup-content {
                min-width: 240px;
            }

            #listView {
                padding: 1rem;
            }

            .restaurant-card {
                padding: 1rem;
            }

            .card-icon {
                width: 40px;
                height: 40px;
                border-radius: 10px;
            }

            .card-icon svg {
                width: 20px;
                height: 20px;
            }

            .card-content h3 {
                font-size: 0.9rem;
            }

            .card-content p {
                font-size: 0.8rem;
            }

            .card-btn {
                width: 36px;
                height: 36px;
            }

            .card-btn svg {
                width: 16px;
                height: 16px;
            }
        }

        /* Small mobile */
        @media (max-width: 400px) {
            .logo-primary {
                font-size: 1rem;
            }

            .logo-secondary {
                font-size: 0.45rem;
            }
        }

        /* Loading State */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--cream);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            transition: opacity 0.5s ease;
        }

        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--cream-dark);
            border-top-color: var(--forest-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-logo {
            text-align: center;
            margin-top: 1.5rem;
        }

        .loading-logo h2 {
            font-family: 'Archivo Black', sans-serif;
            color: var(--forest-green);
            font-size: 1.8rem;
            text-transform: uppercase;
            margin: 0;
        }

        .loading-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin: 0.4rem 0;
        }

        .loading-divider::before,
        .loading-divider::after {
            content: '';
            width: 30px;
            height: 1px;
            background: var(--forest-green);
            opacity: 0.3;
        }

        .loading-kentucky {
            width: 28px;
            height: 13px;
            fill: var(--forest-green);
            opacity: 0.6;
        }

        .loading-logo span {
            font-family: 'Inter', sans-serif;
            font-size: 0.7rem;
            color: var(--olive-gold-dark);
            font-weight: 600;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Leaflet Control Styling */
        .leaflet-control-zoom {
            border: none !important;
            box-shadow: 0 2px 10px var(--shadow) !important;
        }

        .leaflet-control-zoom a {
            background: var(--cream) !important;
            color: var(--forest-green) !important;
            border: none !important;
            width: 36px !important;
            height: 36px !important;
            line-height: 36px !important;
            font-size: 18px !important;
        }

        .leaflet-control-zoom a:hover {
            background: var(--cream-dark) !important;
        }

        .leaflet-control-zoom-in {
            border-radius: 8px 8px 0 0 !important;
        }

        .leaflet-control-zoom-out {
            border-radius: 0 0 8px 8px !important;
        }

        /* Scrollbar styling for list view */
        #listView::-webkit-scrollbar {
            width: 8px;
        }

        #listView::-webkit-scrollbar-track {
            background: var(--cream-dark);
        }

        #listView::-webkit-scrollbar-thumb {
            background: var(--olive-gold);
            border-radius: 4px;
        }

        #listView::-webkit-scrollbar-thumb:hover {
            background: var(--olive-gold-dark);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <div class="loading-logo">
            <h2>Uncle D's</h2>
            <div class="loading-divider">
                <svg class="loading-kentucky" viewBox="0 0 100 45" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0,18 C2,15 4,17 6,14 C8,12 10,14 12,11 C14,9 16,11 18,8 C20,6 22,8 24,5 C26,3 28,5 30,3 C32,1 34,3 36,2 C38,1 40,2 42,1 C44,0 46,1 48,0 C50,1 52,0 54,1 C56,2 58,1 60,2 C62,3 64,2 66,4 C68,5 70,4 72,6 L74,8 L76,7 L80,10 L84,8 L88,12 L92,10 L96,14 L100,12 L100,18 C98,20 100,22 98,24 C96,26 98,28 96,30 L94,32 L96,35 L92,38 L88,36 L84,40 L80,38 L76,42 L72,40 L68,44 L64,42 L60,45 L18,45 L18,40 L14,42 L10,38 L6,40 L2,36 L0,32 C2,30 0,28 2,26 C0,24 2,22 0,20 Z"/>
                </svg>
            </div>
            <span>Good Eats</span>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo">
                <h1 class="logo-primary">Uncle D's</h1>
                <div class="logo-divider">
                    <svg class="kentucky-icon" viewBox="0 0 100 45" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0,18 C2,15 4,17 6,14 C8,12 10,14 12,11 C14,9 16,11 18,8 C20,6 22,8 24,5 C26,3 28,5 30,3 C32,1 34,3 36,2 C38,1 40,2 42,1 C44,0 46,1 48,0 C50,1 52,0 54,1 C56,2 58,1 60,2 C62,3 64,2 66,4 C68,5 70,4 72,6 L74,8 L76,7 L80,10 L84,8 L88,12 L92,10 L96,14 L100,12 L100,18 C98,20 100,22 98,24 C96,26 98,28 96,30 L94,32 L96,35 L92,38 L88,36 L84,40 L80,38 L76,42 L72,40 L68,44 L64,42 L60,45 L18,45 L18,40 L14,42 L10,38 L6,40 L2,36 L0,32 C2,30 0,28 2,26 C0,24 2,22 0,20 Z"/>
                    </svg>
                </div>
                <span class="logo-secondary">Good Eats</span>
            </div>

            <div class="search-container">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <circle cx="11" cy="11" r="8"/>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                </svg>
                <input type="text" class="search-input" id="searchInput" placeholder="Search restaurants...">
                <div class="search-results" id="searchResults"></div>
            </div>

            <div class="header-right">
                <div class="view-toggle">
                    <button class="view-toggle-btn active" id="mapViewBtn" title="Map View">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/>
                            <line x1="8" y1="2" x2="8" y2="18"/>
                            <line x1="16" y1="6" x2="16" y2="22"/>
                        </svg>
                        <span>Map</span>
                    </button>
                    <button class="view-toggle-btn" id="listViewBtn" title="List View">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="8" y1="6" x2="21" y2="6"/>
                            <line x1="8" y1="12" x2="21" y2="12"/>
                            <line x1="8" y1="18" x2="21" y2="18"/>
                            <line x1="3" y1="6" x2="3.01" y2="6"/>
                            <line x1="3" y1="12" x2="3.01" y2="12"/>
                            <line x1="3" y1="18" x2="3.01" y2="18"/>
                        </svg>
                        <span>List</span>
                    </button>
                </div>

                <div class="restaurant-count" id="restaurantCount">
                    81 spots
                </div>
            </div>
        </div>
    </header>

    <!-- Map -->
    <div id="map"></div>

    <!-- List View -->
    <div id="listView">
        <div class="list-container">
            <div class="list-header">
                <h2>All Restaurants</h2>
                <select class="sort-select" id="sortSelect">
                    <option value="name">Sort by Name</option>
                    <option value="address">Sort by Address</option>
                </select>
            </div>
            <div class="restaurant-list" id="restaurantList">
                <!-- Cards will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // Restaurant Data
        const restaurants = [
  {
    "name": "A Toda Madre",
    "address": "8200 Preston Hwy, Louisville, KY 40219",
    "lat": 38.1332639,
    "lng": -85.6846969
  },
  {
    "name": "Abyssinia Ethiopian",
    "address": "554 S 5th St, Louisville, KY 40202",
    "lat": 38.2495279,
    "lng": -85.7596494
  },
  {
    "name": "African Best Restaurant",
    "address": "7325 St Andrews Church Rd, Louisville, KY 40214",
    "lat": 38.1539235,
    "lng": -85.802952
  },
  {
    "name": "Al-Sham Market",
    "address": "3819 Bardstown Rd, Ste B, Louisville, KY 40218",
    "lat": 38.1965,
    "lng": -85.6544
  },
  {
    "name": "Alwatan Bakery",
    "address": "3711 Klondike Ln, Louisville, KY 40218",
    "lat": 38.2106445,
    "lng": -85.6396965
  },
  {
    "name": "B&N Food Market",
    "address": "5945 Elmburg Rd, Bagdad, KY 40003",
    "lat": 38.2618986,
    "lng": -85.0581353
  },
  {
    "name": "Banaadir Cafe and Grill",
    "address": "5600 S 3rd St, Louisville, KY 40214",
    "lat": 38.1691433,
    "lng": -85.768872
  },
  {
    "name": "Bellissimo",
    "address": "2217 Steier Ln, Louisville, KY 40218",
    "lat": 38.1979461,
    "lng": -85.6569047
  },
  {
    "name": "Big Hopp's Southern Eatery",
    "address": "2913 Dixie Hwy, Louisville, KY 40216",
    "lat": 38.166334,
    "lng": -85.8297254
  },
  {
    "name": "Big Momma's Soul Food Kitchen",
    "address": "1812 W Muhammad Ali Blvd, Louisville, KY 40203",
    "lat": 38.2536055,
    "lng": -85.7814802
  },
  {
    "name": "Bodega Mi SueÃ±o",
    "address": "3646 Mall Rd, Louisville, KY 40218",
    "lat": 38.2106,
    "lng": -85.651
  },
  {
    "name": "Carriss' Grocery",
    "address": "7 Southville Pike, Shelbyville, KY 40065",
    "lat": 38.11,
    "lng": -85.1832
  },
  {
    "name": "Dalat's Banh Mi and Boba",
    "address": "6915 Southside Dr, Louisville, KY 40214",
    "lat": 38.1567326,
    "lng": -85.7636532
  },
  {
    "name": "District 6 Vietnamese Gastropub",
    "address": "3930 Shelbyville Rd, Louisville, KY 40207",
    "lat": 38.2526332,
    "lng": -85.6539333
  },
  {
    "name": "Dixie Chicken (Dixie Hwy)",
    "address": "3947 Dixie Hwy, Louisville, KY 40216",
    "lat": 38.166334,
    "lng": -85.8297254
  },
  {
    "name": "Dixie Chicken (W Oak St)",
    "address": "1785 W Oak St, Louisville, KY 40210",
    "lat": 38.2375459,
    "lng": -85.7863856
  },
  {
    "name": "Eat at The Spot",
    "address": "865 S Dixie Blvd, Radcliff, KY 40160",
    "lat": 37.8297114,
    "lng": -85.9302105
  },
  {
    "name": "El Taco Ranchero",
    "address": "5015 Poplar Level Rd, Louisville, KY 40219",
    "lat": 38.1659309,
    "lng": -85.6802271
  },
  {
    "name": "Emilio's Taqueria",
    "address": "9218 Blue Lick Rd, Louisville, KY 40229",
    "lat": 38.114471,
    "lng": -85.6908421
  },
  {
    "name": "FABD Smokehouse",
    "address": "3204 Frankfort Ave, Louisville, KY 40206",
    "lat": 38.2540842,
    "lng": -85.6749436
  },
  {
    "name": "Family Ties Restaurant",
    "address": "1030 Cecil Ave, Louisville, KY 40211",
    "lat": 38.244452,
    "lng": -85.8214666
  },
  {
    "name": "Fort Royal Caribbean Restaurant",
    "address": "6918 Southside Dr, Louisville, KY 40214",
    "lat": 38.1566672,
    "lng": -85.764972
  },
  {
    "name": "Franco's Restaurant & Catering",
    "address": "3300 Dixie Hwy, Louisville, KY 40216",
    "lat": 38.166334,
    "lng": -85.8297254
  },
  {
    "name": "Gorilla Bob's Grub Shack",
    "address": "8503 Terry Rd, Louisville, KY 40258",
    "lat": 38.1510989,
    "lng": -85.869621
  },
  {
    "name": "Guatelinda Taqueria #3 (Citadel Way)",
    "address": "8603 Citadel Way, Louisville, KY 40220",
    "lat": 38.2165,
    "lng": -85.556
  },
  {
    "name": "Hilltop Chicken",
    "address": "1209 W Hill St, Louisville, KY 40210",
    "lat": 38.2276743,
    "lng": -85.7755964
  },
  {
    "name": "Hokkaido Ramen & Sushi (New Cut Rd)",
    "address": "5207 New Cut Rd, Louisville, KY 40214",
    "lat": 38.1609904,
    "lng": -85.7784793
  },
  {
    "name": "Hokkaido Ramen & Sushi (W Kenwood Dr)",
    "address": "818 W Kenwood Dr, Louisville, KY 40214",
    "lat": 38.1625629,
    "lng": -85.7887015
  },
  {
    "name": "Imanka 2 Somali Restaurant (S 3rd St)",
    "address": "5318 S 3rd St, Louisville, KY 40214",
    "lat": 38.17326,
    "lng": -85.7698689
  },
  {
    "name": "Imanka Somali Restaurant (S 8th St)",
    "address": "737 S 8th St, Louisville, KY 40203",
    "lat": 38.2453965,
    "lng": -85.766124
  },
  {
    "name": "JJ Grill Mediterranean",
    "address": "3741 Pamela Rae Dr, Louisville, KY 40241",
    "lat": 38.3013424,
    "lng": -85.5816604
  },
  {
    "name": "Jin Doshirak",
    "address": "211 S 5th St, Louisville, KY 40202",
    "lat": 38.2534032,
    "lng": -85.7582596
  },
  {
    "name": "John O'Bryan's Tavern",
    "address": "4123 Flintlock Dr, Louisville, KY 40216",
    "lat": 38.1686679,
    "lng": -85.8381389
  },
  {
    "name": "Kathmandu Kitchen & Bar",
    "address": "3825 Bardstown Rd, Ste 108, Louisville, KY 40218",
    "lat": 38.196,
    "lng": -85.6537
  },
  {
    "name": "Ken Tex BBQ",
    "address": "1163 Mt Eden Rd, Shelbyville, KY 40065",
    "lat": 38.1779682,
    "lng": -85.1916595
  },
  {
    "name": "Kiwami Ramen Bar",
    "address": "1700 Bardstown Rd, Louisville, KY 40205",
    "lat": 38.2291058,
    "lng": -85.7178379
  },
  {
    "name": "Koko & Rae Caribbean Kitchen",
    "address": "1511 Bardstown Rd, Louisville, KY 40205",
    "lat": 38.2349295,
    "lng": -85.7209656
  },
  {
    "name": "Kwetu African Cuisine",
    "address": "1725 Berry Blvd, Louisville, KY 40215",
    "lat": 38.2049691,
    "lng": -85.7777939
  },
  {
    "name": "La Cabanita Mexican Grill",
    "address": "4900 Poplar Level Rd, Louisville, KY 40219",
    "lat": 38.1681168,
    "lng": -85.681232
  },
  {
    "name": "La Catrina Mexican Kitchen (New Albany)",
    "address": "202 E Elm St, New Albany, IN 47150",
    "lat": 38.2879181,
    "lng": -85.8193259
  },
  {
    "name": "La Catrina Tacos & Tequila (Jeffersonville)",
    "address": "125 W Chestnut St, Jeffersonville, IN 47130",
    "lat": 38.2881073,
    "lng": -85.7383306
  },
  {
    "name": "La Guanaquita (E Broadway)",
    "address": "600 E Broadway, Louisville, KY 40202",
    "lat": 38.2462633,
    "lng": -85.7476621
  },
  {
    "name": "La Guanaquita (Taylor Blvd)",
    "address": "4231 Taylor Blvd, Louisville, KY 40215",
    "lat": 38.18536,
    "lng": -85.7794282
  },
  {
    "name": "La Palma Cuban Restaurant",
    "address": "5614 Preston Hwy, Louisville, KY 40213",
    "lat": 38.1766313,
    "lng": -85.6982188
  },
  {
    "name": "Lebrang Food Mart",
    "address": "175 Market St, Charlestown, IN 47111",
    "lat": 38.4527618,
    "lng": -85.6710877
  },
  {
    "name": "Lindsay's Kitchen",
    "address": "5300 Cane Run Rd, Louisville, KY 40258",
    "lat": 38.1482096,
    "lng": -85.8531424
  },
  {
    "name": "Los Hermanos Catrachos",
    "address": "4106 Taylor Blvd, Louisville, KY 40215",
    "lat": 38.1876979,
    "lng": -85.7789932
  },
  {
    "name": "Louisville Smokers BBQ",
    "address": "1500 W Oak St, Louisville, KY 40210",
    "lat": 38.2378403,
    "lng": -85.7824169
  },
  {
    "name": "Mack Bros BBQ",
    "address": "2700 1/2 Rockford Ln, Louisville, KY 40216",
    "lat": 38.1867269,
    "lng": -85.8237426
  },
  {
    "name": "Mammy's Kitchen & Bar",
    "address": "116 W Stephen Foster Ave, Bardstown, KY 40004",
    "lat": 37.8101582,
    "lng": -85.4678188
  },
  {
    "name": "Mashallah African Restaurant",
    "address": "4109 Bardstown Rd, Ste 104, Louisville, KY 40218",
    "lat": 38.1924,
    "lng": -85.6463
  },
  {
    "name": "Mike Linnig's Restaurant",
    "address": "9308 Cane Run Rd, Louisville, KY 40258",
    "lat": 38.0936166,
    "lng": -85.8831685
  },
  {
    "name": "Mirage Mediterranean (Preston Hwy)",
    "address": "4100 Preston Hwy, Louisville, KY 40213",
    "lat": 38.1979553,
    "lng": -85.7142188
  },
  {
    "name": "Mirage Mediterranean Express (Dutchmans Ln)",
    "address": "4000 Dutchmans Ln, Louisville, KY 40207",
    "lat": 38.2508903,
    "lng": -85.6480065
  },
  {
    "name": "Otter Creek Tavern",
    "address": "6860 Flaherty Rd, Vine Grove, KY 40175",
    "lat": 37.8107,
    "lng": -85.9817
  },
  {
    "name": "Restaurant Guatelinda (Poplar Level Rd)",
    "address": "5049 Poplar Level Rd, Louisville, KY 40219",
    "lat": 38.1654568,
    "lng": -85.6795832
  },
  {
    "name": "Shalimar Restaurant",
    "address": "1850 S Hurstbourne Pkwy, Ste 125, Louisville, KY 40220",
    "lat": 38.2217,
    "lng": -85.5836
  },
  {
    "name": "Shawarma Guys",
    "address": "5401 Indian Oaks Cir, Louisville, KY 40219",
    "lat": 38.1579399,
    "lng": -85.6667867
  },
  {
    "name": "Sichuan House",
    "address": "7309 Preston Hwy, Louisville, KY 40219",
    "lat": 38.1465679,
    "lng": -85.6873127
  },
  {
    "name": "Sissy's Tacos",
    "address": "580 N Bardstown Rd, Ste 3, Mount Washington, KY 40047",
    "lat": 38.0521,
    "lng": -85.5472
  },
  {
    "name": "Soulful Choices",
    "address": "4532 W Broadway, Louisville, KY 40211",
    "lat": 38.2272989,
    "lng": -85.8159929
  },
  {
    "name": "Stevie J's Barbecue",
    "address": "1831 W Jefferson St, Louisville, KY 40203",
    "lat": 38.2475858,
    "lng": -85.7814082
  },
  {
    "name": "Sweet Havana",
    "address": "5510 Fern Valley Rd, Ste 101, Louisville, KY 40228",
    "lat": 38.1552,
    "lng": -85.658
  },
  {
    "name": "Taco Choza",
    "address": "3922 Westport Rd, Louisville, KY 40207",
    "lat": 38.2596055,
    "lng": -85.6523247
  },
  {
    "name": "Tacolandia",
    "address": "5400 Preston Hwy, Louisville, KY 40213",
    "lat": 38.1789163,
    "lng": -85.6994476
  },
  {
    "name": "Tacos El Tio Martin",
    "address": "5101 S 3rd St, Louisville, KY 40214",
    "lat": 38.1762609,
    "lng": -85.7705283
  },
  {
    "name": "Tacos Guerra",
    "address": "8601 National Turnpike, Louisville, KY 40118",
    "lat": 38.1119234,
    "lng": -85.7841598
  },
  {
    "name": "Tacos Juanito",
    "address": "5601 Preston Hwy, Louisville, KY 40219",
    "lat": 38.1766313,
    "lng": -85.6982188
  },
  {
    "name": "Taqueria El Mexicano",
    "address": "7611 Preston Hwy, Louisville, KY 40219",
    "lat": 38.1414659,
    "lng": -85.6864258
  },
  {
    "name": "Taqueria El Titi",
    "address": "8219 Minor Ln, Louisville, KY 40219",
    "lat": 38.1263,
    "lng": -85.7083
  },
  {
    "name": "Taqueria Los Gorditos",
    "address": "2017 Brownsboro Rd, Louisville, KY 40206",
    "lat": 38.2631892,
    "lng": -85.7137091
  },
  {
    "name": "Taquero Mucho",
    "address": "5700 Outer Loop, Louisville, KY 40219",
    "lat": 38.1306098,
    "lng": -85.6985093
  },
  {
    "name": "The Charcoal Restaurant",
    "address": "2805 N Hurstbourne Pkwy, Ste 100, Louisville, KY 40223",
    "lat": 38.2861,
    "lng": -85.5701
  },
  {
    "name": "The House of Marigold",
    "address": "10310 Shelbyville Rd, Louisville, KY 40223",
    "lat": 38.2576556,
    "lng": -85.5445291
  },
  {
    "name": "Tikka Tacos",
    "address": "3311 Preston Hwy, Louisville, KY 40213",
    "lat": 38.2069459,
    "lng": -85.7200063
  },
  {
    "name": "Tim Page's Corner Store",
    "address": "2922 Taylor Blvd, Louisville, KY 40208",
    "lat": 38.2054166,
    "lng": -85.7683538
  },
  {
    "name": "Tomo Japanese Ramen & Sushi",
    "address": "5023 Mud Ln, Ste 160, Louisville, KY 40229",
    "lat": 38.0919,
    "lng": -85.6718
  },
  {
    "name": "Veronica's Mexican (Poplar Level Rd)",
    "address": "5044 Poplar Level Rd, Louisville, KY 40219",
    "lat": 38.165547,
    "lng": -85.679705
  },
  {
    "name": "Veronica's Mexican (Preston Hwy)",
    "address": "11470 Preston Hwy, Louisville, KY 40229",
    "lat": 38.0722831,
    "lng": -85.6693298
  },
  {
    "name": "Wagner's Village Inn",
    "address": "22171 Main St, Oldenburg, IN 47036",
    "lat": 39.3440508,
    "lng": -85.207688
  },
  {
    "name": "Zamzam Restaurant",
    "address": "1808 Berry Blvd, Louisville, KY 40215",
    "lat": 38.2037813,
    "lng": -85.7766688
  }
];

        // Sort restaurants alphabetically by default
        restaurants.sort((a, b) => a.name.localeCompare(b.name));

        // Initialize map
        const map = L.map('map', {
            zoomControl: true,
            scrollWheelZoom: true
        }).setView([38.2, -85.72], 11);

        // Add tile layer
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 19
        }).addTo(map);

        // Custom marker icon
        const createMarkerIcon = () => {
            return L.divIcon({
                className: 'custom-marker-wrapper',
                html: `<div class="custom-marker">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                    </svg>
                </div>`,
                iconSize: [32, 32],
                iconAnchor: [16, 32],
                popupAnchor: [0, -32]
            });
        };

        // Create popup content
        const createPopupContent = (restaurant) => {
            const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(restaurant.name + ', ' + restaurant.address)}`;
            const directionsUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(restaurant.address)}`;

            return `
                <div class="popup-content">
                    <div class="popup-header">
                        <h3>${restaurant.name}</h3>
                    </div>
                    <div class="popup-body">
                        <div class="popup-address">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                            </svg>
                            <span>${restaurant.address}</span>
                        </div>
                        <div class="popup-actions">
                            <a href="${googleMapsUrl}" target="_blank" class="popup-btn popup-btn-primary">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                                    <polyline points="15 3 21 3 21 9"/>
                                    <line x1="10" y1="14" x2="21" y2="3"/>
                                </svg>
                                View
                            </a>
                            <a href="${directionsUrl}" target="_blank" class="popup-btn popup-btn-secondary">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="3 11 22 2 13 21 11 13 3 11"/>
                                </svg>
                                Directions
                            </a>
                        </div>
                    </div>
                </div>
            `;
        };

        // Store markers for search functionality
        const markers = [];

        // Add markers to map
        restaurants.forEach(restaurant => {
            const marker = L.marker([restaurant.lat, restaurant.lng], {
                icon: createMarkerIcon()
            })
            .bindPopup(createPopupContent(restaurant), {
                closeButton: true,
                maxWidth: 300
            })
            .addTo(map);

            markers.push({
                marker,
                restaurant
            });
        });

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const restaurantCount = document.getElementById('restaurantCount');
        const mapViewBtn = document.getElementById('mapViewBtn');
        const listViewBtn = document.getElementById('listViewBtn');
        const mapEl = document.getElementById('map');
        const listViewEl = document.getElementById('listView');
        const restaurantList = document.getElementById('restaurantList');
        const sortSelect = document.getElementById('sortSelect');

        let currentView = 'map';
        let currentSearchQuery = '';

        // View Toggle
        function switchToMapView() {
            currentView = 'map';
            mapViewBtn.classList.add('active');
            listViewBtn.classList.remove('active');
            mapEl.classList.remove('hidden');
            listViewEl.classList.remove('active');
            map.invalidateSize();
        }

        function switchToListView() {
            currentView = 'list';
            listViewBtn.classList.add('active');
            mapViewBtn.classList.remove('active');
            mapEl.classList.add('hidden');
            listViewEl.classList.add('active');
            renderList();
        }

        mapViewBtn.addEventListener('click', switchToMapView);
        listViewBtn.addEventListener('click', switchToListView);

        // Create restaurant card HTML
        function createCardHTML(restaurant) {
            const directionsUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(restaurant.address)}`;

            return `
                <div class="restaurant-card" data-name="${restaurant.name}" data-lat="${restaurant.lat}" data-lng="${restaurant.lng}">
                    <div class="card-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <h3>${restaurant.name}</h3>
                        <p>${restaurant.address}</p>
                    </div>
                    <div class="card-actions">
                        <button class="card-btn card-btn-map" title="Show on map" onclick="event.stopPropagation(); showOnMap('${restaurant.name}', ${restaurant.lat}, ${restaurant.lng})">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/>
                                <line x1="8" y1="2" x2="8" y2="18"/>
                                <line x1="16" y1="6" x2="16" y2="22"/>
                            </svg>
                        </button>
                        <a href="${directionsUrl}" target="_blank" class="card-btn card-btn-directions" title="Get directions" onclick="event.stopPropagation()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="3 11 22 2 13 21 11 13 3 11"/>
                            </svg>
                        </a>
                    </div>
                </div>
            `;
        }

        // Render list view
        function renderList() {
            let filtered = restaurants;

            // Filter by search
            if (currentSearchQuery) {
                filtered = restaurants.filter(r =>
                    r.name.toLowerCase().includes(currentSearchQuery) ||
                    r.address.toLowerCase().includes(currentSearchQuery)
                );
            }

            // Sort
            const sortBy = sortSelect.value;
            filtered.sort((a, b) => {
                if (sortBy === 'name') {
                    return a.name.localeCompare(b.name);
                } else {
                    return a.address.localeCompare(b.address);
                }
            });

            // Update count
            restaurantCount.textContent = `${filtered.length} spots`;

            // Render cards
            if (filtered.length === 0) {
                restaurantList.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                        </svg>
                        <h3>No restaurants found</h3>
                        <p>Try a different search term</p>
                    </div>
                `;
            } else {
                restaurantList.innerHTML = filtered.map(createCardHTML).join('');
            }

            // Add click handlers to cards
            document.querySelectorAll('.restaurant-card').forEach(card => {
                card.addEventListener('click', () => {
                    const name = card.dataset.name;
                    const lat = parseFloat(card.dataset.lat);
                    const lng = parseFloat(card.dataset.lng);
                    showOnMap(name, lat, lng);
                });
            });
        }

        // Show restaurant on map
        window.showOnMap = function(name, lat, lng) {
            switchToMapView();
            map.setView([lat, lng], 16);

            const markerData = markers.find(m => m.restaurant.name === name);
            if (markerData) {
                setTimeout(() => {
                    markerData.marker.openPopup();
                }, 300);
            }
        };

        // Sort change handler
        sortSelect.addEventListener('change', renderList);

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            currentSearchQuery = e.target.value.toLowerCase().trim();

            if (currentSearchQuery.length === 0) {
                searchResults.classList.remove('active');
                restaurantCount.textContent = `${restaurants.length} spots`;

                if (currentView === 'list') {
                    renderList();
                }
                return;
            }

            const filtered = restaurants.filter(r =>
                r.name.toLowerCase().includes(currentSearchQuery) ||
                r.address.toLowerCase().includes(currentSearchQuery)
            );

            restaurantCount.textContent = `${filtered.length} spots`;

            // Update list view if active
            if (currentView === 'list') {
                renderList();
            }

            // Show dropdown results (for map view mainly)
            if (filtered.length === 0) {
                searchResults.innerHTML = '<div class="no-results">No restaurants found</div>';
            } else {
                searchResults.innerHTML = filtered.slice(0, 8).map(r => `
                    <div class="search-result-item" data-lat="${r.lat}" data-lng="${r.lng}" data-name="${r.name}">
                        <h4>${r.name}</h4>
                        <p>${r.address}</p>
                    </div>
                `).join('');
            }

            searchResults.classList.add('active');
        });

        // Handle search result clicks
        searchResults.addEventListener('click', (e) => {
            const item = e.target.closest('.search-result-item');
            if (item) {
                const lat = parseFloat(item.dataset.lat);
                const lng = parseFloat(item.dataset.lng);
                const name = item.dataset.name;

                showOnMap(name, lat, lng);

                searchResults.classList.remove('active');
                searchInput.value = name;
                currentSearchQuery = name.toLowerCase();
            }
        });

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                searchResults.classList.remove('active');
            }
        });

        // Hide loading screen
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loading').classList.add('hidden');
            }, 500);
        });

        // Fit map to show all markers
        const bounds = L.latLngBounds(restaurants.map(r => [r.lat, r.lng]));
        map.fitBounds(bounds, { padding: [50, 50] });
    </script>
</body>
</html>
