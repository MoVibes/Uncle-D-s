<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Uncle D's Good Eats</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --olive-gold: #A89968;
            --olive-gold-dark: #8B7D4F;
            --forest-green: #3D5A3D;
            --forest-green-light: #4A6B4A;
            --lime-accent: #8B9A3B;
            --cream: #FAF9F6;
            --cream-dark: #F0EDE5;
            --charcoal: #2D2D2D;
            --shadow: rgba(61, 90, 61, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--cream);
            color: var(--charcoal);
        }

        /* Header */
        header {
            background: var(--olive-gold);
            padding: 0.75rem 1.5rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px var(--shadow);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        /* Logo Lockup */
        .logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            line-height: 1;
        }

        .logo-primary {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.4rem;
            color: var(--forest-green);
            letter-spacing: -0.5px;
            text-transform: uppercase;
            margin: 0;
        }

        .logo-divider {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin: 0.25rem 0 0.15rem 0;
            width: 100%;
        }

        .logo-divider::before,
        .logo-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--forest-green);
            opacity: 0.4;
        }

        .logo-star {
            color: var(--forest-green);
            font-size: 0.6rem;
            opacity: 0.7;
            flex-shrink: 0;
        }

        .logo-secondary {
            font-family: 'Inter', sans-serif;
            font-size: 0.65rem;
            color: var(--cream);
            font-weight: 600;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }

        /* Search */
        .search-container {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.75rem;
            border: none;
            border-radius: 50px;
            font-size: 0.9rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.95);
            color: var(--charcoal);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .search-input::placeholder {
            color: #999;
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: var(--forest-green);
        }

        /* Header Right Section */
        .header-right {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        /* View Toggle */
        .view-toggle {
            display: flex;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            padding: 3px;
        }

        .view-toggle-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            background: transparent;
            color: var(--forest-green);
        }

        .view-toggle-btn.active {
            background: var(--cream);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .view-toggle-btn:not(.active):hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .view-toggle-btn svg {
            width: 16px;
            height: 16px;
        }

        .restaurant-count {
            background: var(--forest-green);
            color: var(--cream);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        /* Map Container */
        #map {
            position: fixed;
            top: 72px;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
            transition: opacity 0.3s ease;
        }

        #map.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* List View */
        #listView {
            position: fixed;
            top: 72px;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--cream);
            z-index: 2;
            overflow-y: auto;
            display: none;
            padding: 1.5rem;
        }

        #listView.active {
            display: block;
        }

        .list-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .list-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--cream-dark);
        }

        .list-header h2 {
            font-family: 'Archivo Black', sans-serif;
            color: var(--forest-green);
            font-size: 1.3rem;
        }

        .sort-select {
            padding: 0.5rem 1rem;
            border: 2px solid var(--cream-dark);
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            background: white;
            color: var(--charcoal);
            cursor: pointer;
        }

        .sort-select:focus {
            outline: none;
            border-color: var(--forest-green);
        }

        /* Restaurant Cards */
        .restaurant-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .restaurant-card {
            background: white;
            border-radius: 16px;
            padding: 1.25rem;
            box-shadow: 0 2px 12px var(--shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .restaurant-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--shadow);
            border-color: var(--olive-gold);
        }

        .restaurant-card:active {
            transform: translateY(0);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            background: var(--forest-green);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .card-icon svg {
            width: 24px;
            height: 24px;
            color: var(--cream);
        }

        .card-content {
            flex: 1;
            min-width: 0;
        }

        .card-content h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--forest-green);
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card-content p {
            font-size: 0.85rem;
            color: #666;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card-description {
            font-size: 0.8rem;
            color: #555;
            margin-bottom: 0.35rem;
            white-space: normal;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.4;
        }

        .card-address {
            font-size: 0.8rem;
            color: #888;
        }

        .card-actions {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .card-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .card-btn svg {
            width: 18px;
            height: 18px;
        }

        .card-btn-map {
            background: var(--olive-gold);
            color: var(--forest-green);
        }

        .card-btn-map:hover {
            background: var(--olive-gold-dark);
            transform: scale(1.05);
        }

        .card-btn-directions {
            background: var(--cream-dark);
            color: var(--charcoal);
        }

        .card-btn-directions:hover {
            background: #E5E2DA;
            transform: scale(1.05);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #888;
        }

        .empty-state svg {
            width: 64px;
            height: 64px;
            color: var(--cream-dark);
            margin-bottom: 1rem;
        }

        .empty-state h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--charcoal);
        }

        /* Custom Popup Styling */
        .leaflet-popup-content-wrapper {
            border-radius: 16px;
            padding: 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .leaflet-popup-content {
            margin: 0;
            min-width: 260px;
        }

        .leaflet-popup-tip {
            background: var(--cream);
        }

        .popup-content {
            background: var(--cream);
        }

        .popup-header {
            background: var(--forest-green);
            padding: 1rem 1.25rem;
        }

        .popup-header h3 {
            color: var(--cream);
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
            line-height: 1.3;
        }

        .popup-body {
            padding: 1rem 1.25rem;
        }

        .popup-description {
            font-size: 0.85rem;
            line-height: 1.5;
            color: #555;
            margin: 0 0 0.75rem 0;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #eee;
        }

        .popup-address {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            color: #666;
            font-size: 0.85rem;
            line-height: 1.4;
            margin-bottom: 1rem;
        }

        .popup-address svg {
            flex-shrink: 0;
            margin-top: 2px;
            color: var(--lime-accent);
        }

        .popup-actions {
            display: flex;
            gap: 0.5rem;
        }

        .popup-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            padding: 0.7rem 1rem;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .popup-btn-primary {
            background: var(--olive-gold);
            color: var(--forest-green);
        }

        .popup-btn-primary:hover {
            background: var(--olive-gold-dark);
            transform: translateY(-1px);
        }

        .popup-btn-secondary {
            background: var(--cream-dark);
            color: var(--charcoal);
        }

        .popup-btn-secondary:hover {
            background: #E5E2DA;
            transform: translateY(-1px);
        }

        /* Custom Marker */
        .custom-marker {
            background: var(--forest-green);
            border: 3px solid var(--cream);
            border-radius: 50% 50% 50% 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: rotate(-45deg);
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
        }

        .custom-marker:hover {
            transform: rotate(-45deg) scale(1.1);
        }

        .custom-marker svg {
            transform: rotate(45deg);
            width: 14px;
            height: 14px;
            color: var(--cream);
        }

        /* Search Results Dropdown */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 12px;
            margin-top: 0.5rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 1001;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s ease;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item:hover {
            background: var(--cream-dark);
        }

        .search-result-item h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--forest-green);
            margin-bottom: 0.2rem;
        }

        .search-result-item p {
            font-size: 0.75rem;
            color: #888;
        }

        .no-results {
            padding: 1rem;
            text-align: center;
            color: #888;
            font-size: 0.85rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            header {
                padding: 0.6rem 1rem;
            }

            .header-content {
                flex-wrap: wrap;
            }

            .logo {
                flex-direction: row;
                align-items: center;
                gap: 0.5rem;
            }

            .logo-primary {
                font-size: 1.1rem;
            }

            .logo-divider {
                width: auto;
                margin: 0;
            }

            .logo-divider::before,
            .logo-divider::after {
                display: none;
            }

            .logo-star {
                font-size: 0.5rem;
                opacity: 0.6;
            }

            .logo-secondary {
                font-size: 0.5rem;
                letter-spacing: 0.15em;
                color: var(--cream);
            }

            .search-container {
                order: 3;
                max-width: 100%;
                width: 100%;
                margin-top: 0.5rem;
            }

            .header-right {
                gap: 0.5rem;
            }

            .view-toggle-btn {
                padding: 0.4rem 0.75rem;
                font-size: 0.75rem;
            }

            .view-toggle-btn span {
                display: none;
            }

            .restaurant-count {
                font-size: 0.75rem;
                padding: 0.4rem 0.8rem;
            }

            #map, #listView {
                top: 100px;
            }

            .leaflet-popup-content {
                min-width: 240px;
            }

            #listView {
                padding: 1rem;
            }

            .restaurant-card {
                padding: 1rem;
            }

            .card-icon {
                width: 40px;
                height: 40px;
                border-radius: 10px;
            }

            .card-icon svg {
                width: 20px;
                height: 20px;
            }

            .card-content h3 {
                font-size: 0.9rem;
            }

            .card-content p {
                font-size: 0.8rem;
            }

            .card-btn {
                width: 36px;
                height: 36px;
            }

            .card-btn svg {
                width: 16px;
                height: 16px;
            }
        }

        /* Small mobile */
        @media (max-width: 400px) {
            .logo-primary {
                font-size: 1rem;
            }

            .logo-secondary {
                font-size: 0.45rem;
            }
        }

        /* Loading State */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--cream);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            transition: opacity 0.5s ease;
        }

        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--cream-dark);
            border-top-color: var(--forest-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-logo {
            text-align: center;
            margin-top: 1.5rem;
        }

        .loading-logo h2 {
            font-family: 'Archivo Black', sans-serif;
            color: var(--forest-green);
            font-size: 1.8rem;
            text-transform: uppercase;
            margin: 0;
        }

        .loading-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin: 0.4rem 0;
        }

        .loading-divider::before,
        .loading-divider::after {
            content: '';
            width: 30px;
            height: 1px;
            background: var(--forest-green);
            opacity: 0.3;
        }

        .loading-star {
            color: var(--forest-green);
            font-size: 0.7rem;
            opacity: 0.6;
        }

        .loading-logo span {
            font-family: 'Inter', sans-serif;
            font-size: 0.7rem;
            color: var(--olive-gold-dark);
            font-weight: 600;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Leaflet Control Styling */
        .leaflet-control-zoom {
            border: none !important;
            box-shadow: 0 2px 10px var(--shadow) !important;
        }

        .leaflet-control-zoom a {
            background: var(--cream) !important;
            color: var(--forest-green) !important;
            border: none !important;
            width: 36px !important;
            height: 36px !important;
            line-height: 36px !important;
            font-size: 18px !important;
        }

        .leaflet-control-zoom a:hover {
            background: var(--cream-dark) !important;
        }

        .leaflet-control-zoom-in {
            border-radius: 8px 8px 0 0 !important;
        }

        .leaflet-control-zoom-out {
            border-radius: 0 0 8px 8px !important;
        }

        /* Scrollbar styling for list view */
        #listView::-webkit-scrollbar {
            width: 8px;
        }

        #listView::-webkit-scrollbar-track {
            background: var(--cream-dark);
        }

        #listView::-webkit-scrollbar-thumb {
            background: var(--olive-gold);
            border-radius: 4px;
        }

        #listView::-webkit-scrollbar-thumb:hover {
            background: var(--olive-gold-dark);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <div class="loading-logo">
            <h2>Uncle D's</h2>
            <div class="loading-divider">
                <span class="loading-star">★</span>
            </div>
            <span>Good Eats</span>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo">
                <h1 class="logo-primary">Uncle D's</h1>
                <div class="logo-divider">
                    <span class="logo-star">★</span>
                </div>
                <span class="logo-secondary">Good Eats</span>
            </div>

            <div class="search-container">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <circle cx="11" cy="11" r="8"/>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                </svg>
                <input type="text" class="search-input" id="searchInput" placeholder="Search restaurants...">
                <div class="search-results" id="searchResults"></div>
            </div>

            <div class="header-right">
                <div class="view-toggle">
                    <button class="view-toggle-btn active" id="mapViewBtn" title="Map View">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/>
                            <line x1="8" y1="2" x2="8" y2="18"/>
                            <line x1="16" y1="6" x2="16" y2="22"/>
                        </svg>
                        <span>Map</span>
                    </button>
                    <button class="view-toggle-btn" id="listViewBtn" title="List View">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="8" y1="6" x2="21" y2="6"/>
                            <line x1="8" y1="12" x2="21" y2="12"/>
                            <line x1="8" y1="18" x2="21" y2="18"/>
                            <line x1="3" y1="6" x2="3.01" y2="6"/>
                            <line x1="3" y1="12" x2="3.01" y2="12"/>
                            <line x1="3" y1="18" x2="3.01" y2="18"/>
                        </svg>
                        <span>List</span>
                    </button>
                </div>

                <div class="restaurant-count" id="restaurantCount">
                    81 spots
                </div>
            </div>
        </div>
    </header>

    <!-- Map -->
    <div id="map"></div>

    <!-- List View -->
    <div id="listView">
        <div class="list-container">
            <div class="list-header">
                <h2>All Restaurants</h2>
                <select class="sort-select" id="sortSelect">
                    <option value="name">Sort by Name</option>
                    <option value="address">Sort by Address</option>
                </select>
            </div>
            <div class="restaurant-list" id="restaurantList">
                <!-- Cards will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // Restaurant Data
        const restaurants = [
  {
    "name": "A Toda Madre",
    "address": "8200 Preston Hwy, Louisville, KY 40219",
    "lat": 38.1332639,
    "lng": -85.6846969,
    "description": "Authentic Mexican street food featuring hand-made tortillas, birria tacos, and giant shareable machetes. Known for generous portions and bold flavors."
  },
  {
    "name": "Abyssinia Ethiopian",
    "address": "554 S 5th St, Louisville, KY 40202",
    "lat": 38.2495279,
    "lng": -85.7596494,
    "description": "Downtown Ethiopian restaurant serving authentic dishes like Doro Wot and Sambusa. Features a traditional coffee ceremony and vegetarian options."
  },
  {
    "name": "African Best Restaurant",
    "address": "7325 St Andrews Church Rd, Louisville, KY 40214",
    "lat": 38.1539235,
    "lng": -85.802952,
    "description": "Hidden gem serving authentic West African cuisine including Jollof rice, Egusi soup with fufu, and grilled tilapia with African seasoning."
  },
  {
    "name": "Al-Sham Market",
    "address": "3819 Bardstown Rd, Ste B, Louisville, KY 40218",
    "lat": 38.1965,
    "lng": -85.6544,
    "description": "Middle Eastern market and deli known for having the best falafel in Kentucky. Fresh shawarma sandwiches, grilled kabobs, and halal groceries."
  },
  {
    "name": "Alwatan Bakery",
    "address": "3711 Klondike Ln, Louisville, KY 40218",
    "lat": 38.2106445,
    "lng": -85.6396965,
    "description": "Beloved Middle Eastern bakery since 1992 serving fresh pita bread, falafel, shish kebabs, and authentic Palestinian sweets including homemade baklawa."
  },
  {
    "name": "B&N Food Market",
    "address": "5945 Elmburg Rd, Bagdad, KY 40003",
    "lat": 38.2618986,
    "lng": -85.0581353,
    "description": "Country store and market in rural Shelby County offering local goods, deli items, and Southern staples in a small-town atmosphere."
  },
  {
    "name": "Banaadir Cafe and Grill",
    "address": "5600 S 3rd St, Louisville, KY 40214",
    "lat": 38.1691433,
    "lng": -85.768872,
    "description": "Authentic Somali restaurant with 4.7 rating. Tender goat and lamb dishes, beef suqaar, sambusas, and traditional shaah tea in a family-friendly setting."
  },
  {
    "name": "Bellissimo",
    "address": "2217 Steier Ln, Louisville, KY 40218",
    "lat": 38.1979461,
    "lng": -85.6569047,
    "description": "Unique Italian-Afghan fusion restaurant serving fresh pasta, authentic Afghan kebabs, and Persian dishes. Louisville's first Afghan restaurant. All halal meat."
  },
  {
    "name": "Big Hopp's Southern Eatery",
    "address": "2913 Dixie Hwy, Louisville, KY 40216",
    "lat": 38.166334,
    "lng": -85.8297254,
    "description": "Southern food with a New Orleans flare. Famous for fried catfish, smothered pork chops, collard greens, and sweet potato casserole."
  },
  {
    "name": "Big Momma's Soul Food Kitchen",
    "address": "1812 W Muhammad Ali Blvd, Louisville, KY 40203",
    "lat": 38.2536055,
    "lng": -85.7814802,
    "description": "West Louisville soul food institution run by 'Big Momma' Jessie Green. Famous for baked spaghetti, smothered pork chops, and huge portions. Different menu daily."
  },
  {
    "name": "Bodega Mi Sueño",
    "address": "3646 Mall Rd, Louisville, KY 40218",
    "lat": 38.2106,
    "lng": -85.651,
    "description": "Latin American grocery and restaurant offering authentic Hispanic products, fresh-made dishes, and traditional flavors from Central and South America."
  },
  {
    "name": "Carriss' Grocery",
    "address": "7 Southville Pike, Shelbyville, KY 40065",
    "lat": 38.11,
    "lng": -85.1832,
    "description": "Small-town country grocery store in Shelbyville serving local community favorites, deli sandwiches, and Southern comfort staples."
  },
  {
    "name": "Dalat's Banh Mi and Boba",
    "address": "6915 Southside Dr, Louisville, KY 40214",
    "lat": 38.1567326,
    "lng": -85.7636532,
    "description": "Vietnamese cafe since 2009 offering signature banh mi, pho, bun bo Hue, boba tea, and French pastries. Named after the charming city of Da Lat."
  },
  {
    "name": "District 6 Vietnamese Gastropub",
    "address": "3930 Shelbyville Rd, Louisville, KY 40207",
    "lat": 38.2526332,
    "lng": -85.6539333,
    "description": "Modern Vietnamese gastropub blending traditional and contemporary dishes with locally-sourced ingredients. Known for pork belly, pho, and craft cocktails."
  },
  {
    "name": "Dixie Chicken (Dixie Hwy)",
    "address": "3947 Dixie Hwy, Louisville, KY 40216",
    "lat": 38.166334,
    "lng": -85.8297254,
    "description": "Local favorite for crispy Southern fried chicken, generous portions, and home-cooked sides like mac & cheese and greens at affordable prices."
  },
  {
    "name": "Dixie Chicken (W Oak St)",
    "address": "1785 W Oak St, Louisville, KY 40210",
    "lat": 38.2375459,
    "lng": -85.7863856,
    "description": "West Louisville fried chicken spot serving crispy, flavorful baked and fried chicken with Southern sides. Known for home-cooked style at great prices."
  },
  {
    "name": "Eat at The Spot",
    "address": "865 S Dixie Blvd, Radcliff, KY 40160",
    "lat": 37.8297114,
    "lng": -85.9302105,
    "description": "The only authentic Jamaican restaurant near Ft. Knox. Famous for tender oxtail, jerk chicken, curry goat, and traditional Caribbean sides."
  },
  {
    "name": "El Taco Ranchero",
    "address": "5015 Poplar Level Rd, Louisville, KY 40219",
    "lat": 38.1659309,
    "lng": -85.6802271,
    "description": "Authentic Mexican taqueria serving traditional tacos, burritos, tortas, and Mexican specialties with homemade salsas and fresh ingredients."
  },
  {
    "name": "Emilio's Taqueria",
    "address": "9218 Blue Lick Rd, Louisville, KY 40229",
    "lat": 38.114471,
    "lng": -85.6908421,
    "description": "Family-owned Mexican taqueria offering authentic tacos, quesadillas, burritos, and traditional Mexican dishes made with fresh ingredients."
  },
  {
    "name": "FABD Smokehouse",
    "address": "3204 Frankfort Ave, Louisville, KY 40206",
    "lat": 38.2540842,
    "lng": -85.6749436,
    "description": "Frankfort Avenue dive bar with barrel smokers out front. Melt-in-your-mouth brisket, tender pulled pork, and ribs with the perfect sweet and spicy balance."
  },
  {
    "name": "Family Ties Restaurant",
    "address": "1030 Cecil Ave, Louisville, KY 40211",
    "lat": 38.244452,
    "lng": -85.8214666,
    "description": "Family-owned West Louisville spot serving fresh BBQ, rib tips, burgers, and Southern soul food. Community-focused with affordable prices."
  },
  {
    "name": "Fort Royal Caribbean Restaurant",
    "address": "6918 Southside Dr, Louisville, KY 40214",
    "lat": 38.1566672,
    "lng": -85.764972,
    "description": "Authentic Haitian cuisine featuring fried pork (griyo), fried chicken, goat dishes, and fresh plantains. A taste of the Caribbean in Louisville."
  },
  {
    "name": "Franco's Restaurant & Catering",
    "address": "3300 Dixie Hwy, Louisville, KY 40216",
    "lat": 38.166334,
    "lng": -85.8297254,
    "description": "Cafeteria-style Southern soul food from the former owners of Jay's Cafeteria. Down-home cooking at family-friendly prices on Dixie Highway."
  },
  {
    "name": "Gorilla Bob's Grub Shack",
    "address": "8503 Terry Rd, Louisville, KY 40258",
    "lat": 38.1510989,
    "lng": -85.869621,
    "description": "Roadside shack famous for the 'Best Hot Brown in the Ville.' Philly cheesesteaks, Cubans, Reubens, and indulgent 'ghetto fries' with all the toppings."
  },
  {
    "name": "Guatelinda Taqueria #3 (Citadel Way)",
    "address": "8603 Citadel Way, Louisville, KY 40220",
    "lat": 38.2165,
    "lng": -85.556,
    "description": "Guatemalan and Mexican taqueria serving authentic Central American dishes including pupusas, tacos, and traditional Guatemalan specialties."
  },
  {
    "name": "Hilltop Chicken",
    "address": "1209 W Hill St, Louisville, KY 40210",
    "lat": 38.2276743,
    "lng": -85.7755964,
    "description": "Neighborhood fried chicken spot serving crispy, flavorful chicken and classic Southern sides in a casual, family-friendly atmosphere."
  },
  {
    "name": "Hokkaido Ramen & Sushi (New Cut Rd)",
    "address": "5207 New Cut Rd, Louisville, KY 40214",
    "lat": 38.1609904,
    "lng": -85.7784793,
    "description": "Japanese eatery offering authentic ramen with rich broth, fresh sushi, deep-fried rolls, and refreshing bubble tea. 4.8 star rating."
  },
  {
    "name": "Hokkaido Ramen & Sushi (W Kenwood Dr)",
    "address": "818 W Kenwood Dr, Louisville, KY 40214",
    "lat": 38.1625629,
    "lng": -85.7887015,
    "description": "Second location serving the same beloved Japanese ramen, fresh sushi, and boba drinks in a cozy setting with speedy service."
  },
  {
    "name": "Imanka 2 Somali Restaurant (S 3rd St)",
    "address": "5318 S 3rd St, Louisville, KY 40214",
    "lat": 38.17326,
    "lng": -85.7698689,
    "description": "Authentic Somali restaurant offering goat, lamb, chicken suqaar, rice dishes, and traditional Somali cuisine with friendly service."
  },
  {
    "name": "Imanka Somali Restaurant (S 8th St)",
    "address": "737 S 8th St, Louisville, KY 40203",
    "lat": 38.2453965,
    "lng": -85.766124,
    "description": "Hidden gem inside Somali Mall serving authentic dishes like beef and chicken suqaar, fried tilapia, lentil soup, and fresh sambusas."
  },
  {
    "name": "JJ Grill Mediterranean",
    "address": "3741 Pamela Rae Dr, Louisville, KY 40241",
    "lat": 38.3013424,
    "lng": -85.5816604,
    "description": "Family-owned Mediterranean grill serving kofta kabab, shawarma, gyro, hummus, and baba ganouj. All food made from scratch with fresh ingredients."
  },
  {
    "name": "Jin Doshirak",
    "address": "211 S 5th St, Louisville, KY 40202",
    "lat": 38.2534032,
    "lng": -85.7582596,
    "description": "Downtown Korean 'lunch box' restaurant serving authentic Korean dishes like bulgogi and kimbap alongside Japanese sushi. Biggest portions in the city."
  },
  {
    "name": "John O'Bryan's Tavern",
    "address": "4123 Flintlock Dr, Louisville, KY 40216",
    "lat": 38.1686679,
    "lng": -85.8381389,
    "description": "Family-owned tavern since 1988 famous for some of the best fried fish sandwiches in Louisville. Cash only, loyal local following."
  },
  {
    "name": "Kathmandu Kitchen & Bar",
    "address": "3825 Bardstown Rd, Ste 108, Louisville, KY 40218",
    "lat": 38.196,
    "lng": -85.6537,
    "description": "Nepali and Indian fusion restaurant with 4.7 rating. MoMo dumplings, Chicken Tikka, biryani, and customizable spice levels. Best in Louisville."
  },
  {
    "name": "Ken Tex BBQ",
    "address": "1163 Mt Eden Rd, Shelbyville, KY 40065",
    "lat": 38.1779682,
    "lng": -85.1916595,
    "description": "Texas-style BBQ institution since 1984. Rotisserie pit hickory-smoked meats including tender beef brisket. Worth the drive to Shelbyville."
  },
  {
    "name": "Kiwami Ramen Bar",
    "address": "1700 Bardstown Rd, Louisville, KY 40205",
    "lat": 38.2291058,
    "lng": -85.7178379,
    "description": "Highlands ramen bar from Tucson serving 'ultimate' ramen with long-simmered pork broth, poke bowls, and Japanese appetizers. Women and Asian-owned."
  },
  {
    "name": "Koko & Rae Caribbean Kitchen",
    "address": "1511 Bardstown Rd, Louisville, KY 40205",
    "lat": 38.2349295,
    "lng": -85.7209656,
    "description": "Highlands Caribbean restaurant serving traditional Jamaican dishes like jerk chicken, oxtail, curry goat, and creative fusion items like Jerk Chicken and Waffles."
  },
  {
    "name": "Kwetu African Cuisine",
    "address": "1725 Berry Blvd, Louisville, KY 40215",
    "lat": 38.2049691,
    "lng": -85.7777939,
    "description": "Family-owned Congolese/Ugandan restaurant. Tender Mbuzi Mchuzi (goat stew), jollof rice, fried plantains, and refreshing Bissap juice. Homey atmosphere."
  },
  {
    "name": "La Cabanita Mexican Grill",
    "address": "4900 Poplar Level Rd, Louisville, KY 40219",
    "lat": 38.1681168,
    "lng": -85.681232,
    "description": "Family-friendly Mexican grill serving authentic tacos, burritos, enchiladas, and traditional Mexican favorites with fresh ingredients."
  },
  {
    "name": "La Catrina Mexican Kitchen (New Albany)",
    "address": "202 E Elm St, New Albany, IN 47150",
    "lat": 38.2879181,
    "lng": -85.8193259,
    "description": "Trendy downtown New Albany spot serving authentic shareable Mexican dishes, house-made cocktail mixers, and seasonal menus since 2018. Hip murals and great vibes."
  },
  {
    "name": "La Catrina Tacos & Tequila (Jeffersonville)",
    "address": "125 W Chestnut St, Jeffersonville, IN 47130",
    "lat": 38.2881073,
    "lng": -85.7383306,
    "description": "Sister location in Jeffersonville offering the same authentic Mexican flavors, craft margaritas, and vibrant atmosphere as the New Albany original."
  },
  {
    "name": "La Guanaquita (E Broadway)",
    "address": "600 E Broadway, Louisville, KY 40202",
    "lat": 38.2462633,
    "lng": -85.7476621,
    "description": "Smoketown location of beloved Salvadoran restaurant since 2014. Authentic pupusas, baleadas, carne asada, and Honduran specialties at great prices."
  },
  {
    "name": "La Guanaquita (Taylor Blvd)",
    "address": "4231 Taylor Blvd, Louisville, KY 40215",
    "lat": 38.18536,
    "lng": -85.7794282,
    "description": "Original location serving authentic Salvadoran cuisine. Famous for handmade pupusas, savory taquitos, and generous portions in a warm, welcoming setting."
  },
  {
    "name": "La Palma Cuban Restaurant",
    "address": "5614 Preston Hwy, Louisville, KY 40213",
    "lat": 38.1766313,
    "lng": -85.6982188,
    "description": "Hidden gem serving authentic Cuban cuisine including the best ropa vieja in town, Cuban sandwiches, yuca with mojo, and sweet fried plantains."
  },
  {
    "name": "Lebrang Food Mart",
    "address": "175 Market St, Charlestown, IN 47111",
    "lat": 38.4527618,
    "lng": -85.6710877,
    "description": "Small-town grocery and deli in Charlestown, Indiana serving local favorites, fresh-made food, and convenience items."
  },
  {
    "name": "Lindsay's Kitchen",
    "address": "5300 Cane Run Rd, Louisville, KY 40258",
    "lat": 38.1482096,
    "lng": -85.8531424,
    "description": "Hidden Louisville gem serving breakfast all day, country fried steak, and home-style cooking in a spacious cabin-like setting. Cracker Barrel vibes."
  },
  {
    "name": "Los Hermanos Catrachos",
    "address": "4106 Taylor Blvd, Louisville, KY 40215",
    "lat": 38.1876979,
    "lng": -85.7789932,
    "description": "Authentic Honduran restaurant serving baleadas, pupusas, tajadas, and traditional Central American dishes with warm hospitality."
  },
  {
    "name": "Louisville Smokers BBQ",
    "address": "1500 W Oak St, Louisville, KY 40210",
    "lat": 38.2378403,
    "lng": -85.7824169,
    "description": "Slow-smoked Southern BBQ near Central Park. Famous for succulent rib tips, smoked chicken wings, and fan-favorite pineapple cole slaw."
  },
  {
    "name": "Mack Bros BBQ",
    "address": "2700 1/2 Rockford Ln, Louisville, KY 40216",
    "lat": 38.1867269,
    "lng": -85.8237426,
    "description": "Black-owned family BBQ serving some of Louisville's best ribs and rib tips so good they don't need sauce. Famous cornbread salad and creamy mac & cheese."
  },
  {
    "name": "Mammy's Kitchen & Bar",
    "address": "116 W Stephen Foster Ave, Bardstown, KY 40004",
    "lat": 37.8101582,
    "lng": -85.4678188,
    "description": "Downtown Bardstown institution. Named 'Best Of' for 14 years. Southern comfort food, 140+ bourbons, live music Fridays, and patio dining."
  },
  {
    "name": "Mashallah African Restaurant",
    "address": "4109 Bardstown Rd, Ste 104, Louisville, KY 40218",
    "lat": 38.1924,
    "lng": -85.6463,
    "description": "West African restaurant since 2000 with authentic decor. Best jollof rice in town, egusi soup, spinach palasas, and mafeh (peanut butter soup)."
  },
  {
    "name": "Mike Linnig's Restaurant",
    "address": "9308 Cane Run Rd, Louisville, KY 40258",
    "lat": 38.0936166,
    "lng": -85.8831685,
    "description": "Legendary Louisville seafood institution since 1925, now in 101st season. Massive fried fish platters, frog legs, turtle soup, and famous onion rings near the Ohio River."
  },
  {
    "name": "Mirage Mediterranean (Preston Hwy)",
    "address": "4100 Preston Hwy, Louisville, KY 40213",
    "lat": 38.1979553,
    "lng": -85.7142188,
    "description": "Family-owned Mediterranean restaurant since 2011. Named best falafel in Louisville. Gyros, shawarma, kebabs, and generous portions near the airport."
  },
  {
    "name": "Mirage Mediterranean Express (Dutchmans Ln)",
    "address": "4000 Dutchmans Ln, Louisville, KY 40207",
    "lat": 38.2508903,
    "lng": -85.6480065,
    "description": "Express location of beloved Mirage Mediterranean serving the same award-winning falafel, shawarma, and kebabs with quick, friendly service."
  },
  {
    "name": "Otter Creek Tavern",
    "address": "6860 Flaherty Rd, Vine Grove, KY 40175",
    "lat": 37.8107,
    "lng": -85.9817,
    "description": "Countryside tavern near Ft. Knox serving cold beer, pub fare, and American comfort food in a relaxed, rural atmosphere."
  },
  {
    "name": "Restaurant Guatelinda (Poplar Level Rd)",
    "address": "5049 Poplar Level Rd, Louisville, KY 40219",
    "lat": 38.1654568,
    "lng": -85.6795832,
    "description": "Guatemalan and Mexican restaurant serving authentic Central American dishes including pupusas, tacos, tamales, and traditional Guatemalan specialties."
  },
  {
    "name": "Shalimar Restaurant",
    "address": "1850 S Hurstbourne Pkwy, Ste 125, Louisville, KY 40220",
    "lat": 38.2217,
    "lng": -85.5836,
    "description": "Established 1999, serving authentic Indian and Pakistani cuisine for 25+ years. Butter chicken, biryani, lamb curry, and halal options. Louisville's best."
  },
  {
    "name": "Shawarma Guys",
    "address": "5401 Indian Oaks Cir, Louisville, KY 40219",
    "lat": 38.1579399,
    "lng": -85.6667867,
    "description": "Popular food truck at Marathon gas station open until 2am. Delicious chicken and steak shawarma sandwiches and bowls at great prices."
  },
  {
    "name": "Sichuan House",
    "address": "7309 Preston Hwy, Louisville, KY 40219",
    "lat": 38.1465679,
    "lng": -85.6873127,
    "description": "Authentic Szechuan Chinese restaurant with dual menu. Spicy mapo tofu, dan dan noodles, cumin lamb, and traditional dishes alongside American-Chinese favorites."
  },
  {
    "name": "Sissy's Tacos",
    "address": "580 N Bardstown Rd, Ste 3, Mount Washington, KY 40047",
    "lat": 38.0521,
    "lng": -85.5472,
    "description": "Mount Washington taqueria serving authentic Mexican tacos, burritos, and traditional dishes with fresh ingredients and homemade salsas."
  },
  {
    "name": "Soulful Choices",
    "address": "4532 W Broadway, Louisville, KY 40211",
    "lat": 38.2272989,
    "lng": -85.8159929,
    "description": "Black-owned West End soul food spot since 2018. Fried fish, chicken, pork chops, and the signature Soul Burger topped with mac & cheese."
  },
  {
    "name": "Stevie J's Barbecue",
    "address": "1831 W Jefferson St, Louisville, KY 40203",
    "lat": 38.2475858,
    "lng": -85.7814082,
    "description": "Black-owned BBQ joint serving smoky ribs, pulled pork, brisket, and homemade sides like mac & cheese, baked beans, and cornbread."
  },
  {
    "name": "Sweet Havana",
    "address": "5510 Fern Valley Rd, Ste 101, Louisville, KY 40228",
    "lat": 38.1552,
    "lng": -85.658,
    "description": "Family-owned Cuban bakery and restaurant since 2021. Famous Cuban sandwiches, ropa vieja, lechon asado, and house-made tres leches, flan, and pastries."
  },
  {
    "name": "Taco Choza",
    "address": "3922 Westport Rd, Louisville, KY 40207",
    "lat": 38.2596055,
    "lng": -85.6523247,
    "description": "Latinx-owned Tex-Mex spot since 2018 known for birria tacos, overstuffed burritos, and handcrafted margaritas. Patio seating and friendly service."
  },
  {
    "name": "Tacolandia",
    "address": "5400 Preston Hwy, Louisville, KY 40213",
    "lat": 38.1789163,
    "lng": -85.6994476,
    "description": "Louisville's newest authentic Mexican restaurant (2024) with 50+ years of hospitality expertise. Tacos, burritos, margaritas, and weekend whole grilled chicken."
  },
  {
    "name": "Tacos El Tio Martin",
    "address": "5101 S 3rd St, Louisville, KY 40214",
    "lat": 38.1762609,
    "lng": -85.7705283,
    "description": "Authentic Mexican taqueria serving traditional street tacos, tortas, quesadillas, and Mexican favorites with fresh, homemade ingredients."
  },
  {
    "name": "Tacos Guerra",
    "address": "8601 National Turnpike, Louisville, KY 40118",
    "lat": 38.1119234,
    "lng": -85.7841598,
    "description": "Authentic Mexican taqueria offering traditional tacos, burritos, and Mexican street food with bold flavors and generous portions."
  },
  {
    "name": "Tacos Juanito",
    "address": "5601 Preston Hwy, Louisville, KY 40219",
    "lat": 38.1766313,
    "lng": -85.6982188,
    "description": "Family-run Mexican restaurant serving authentic tacos, burritos, tortas, and traditional Mexican dishes made fresh daily."
  },
  {
    "name": "Taqueria El Mexicano",
    "address": "7611 Preston Hwy, Louisville, KY 40219",
    "lat": 38.1414659,
    "lng": -85.6864258,
    "description": "Traditional Mexican taqueria offering authentic tacos, quesadillas, tortas, and Mexican specialties with homemade salsas and fresh ingredients."
  },
  {
    "name": "Taqueria El Titi",
    "address": "8219 Minor Ln, Louisville, KY 40219",
    "lat": 38.1263,
    "lng": -85.7083,
    "description": "Local Mexican taqueria serving authentic street-style tacos, burritos, and traditional Mexican dishes in a casual setting."
  },
  {
    "name": "Taqueria Los Gorditos",
    "address": "2017 Brownsboro Rd, Louisville, KY 40206",
    "lat": 38.2631892,
    "lng": -85.7137091,
    "description": "Open until 2am daily. Fresh tacos, tortas, sopes, large burritos, and traditional Mexican dishes including caldo de res and costillitas in green sauce."
  },
  {
    "name": "Taquero Mucho",
    "address": "5700 Outer Loop, Louisville, KY 40219",
    "lat": 38.1306098,
    "lng": -85.6985093,
    "description": "Mexican restaurant and taqueria serving authentic tacos, burritos, quesadillas, and traditional Mexican favorites with bold, fresh flavors."
  },
  {
    "name": "The Charcoal Restaurant",
    "address": "2805 N Hurstbourne Pkwy, Ste 100, Louisville, KY 40223",
    "lat": 38.2861,
    "lng": -85.5701,
    "description": "Authentic Palestinian charcoal-grilled chicken, falafel, shawarma, and hummus. 4.9-star rating, halal, and ranked #2 on Louisville's top places to eat."
  },
  {
    "name": "The House of Marigold",
    "address": "10310 Shelbyville Rd, Louisville, KY 40223",
    "lat": 38.2576556,
    "lng": -85.5445291,
    "description": "Beloved New American brunch spot with farm-to-table rotating menu. Elevated breakfast and lunch with locally-sourced ingredients and house-made pastries."
  },
  {
    "name": "Tikka Tacos",
    "address": "3311 Preston Hwy, Louisville, KY 40213",
    "lat": 38.2069459,
    "lng": -85.7200063,
    "description": "Unique Indo-Mexican fusion serving Bollywood tacos with chicken tikka in paratha bread, lamb tacos, samosas, and butter chicken. Mind-blowing flavor combinations."
  },
  {
    "name": "Tim Page's Corner Store",
    "address": "2922 Taylor Blvd, Louisville, KY 40208",
    "lat": 38.2054166,
    "lng": -85.7683538,
    "description": "Neighborhood corner store and deli serving fresh sandwiches, snacks, and daily specials to the local community."
  },
  {
    "name": "Tomo Japanese Ramen & Sushi",
    "address": "5023 Mud Ln, Ste 160, Louisville, KY 40229",
    "lat": 38.0919,
    "lng": -85.6718,
    "description": "Japanese restaurant serving fresh daily sushi, authentic ramen, hibachi, and boba tea. 4.6 rating with commitment to fresh, natural ingredients."
  },
  {
    "name": "Veronica's Mexican (Poplar Level Rd)",
    "address": "5044 Poplar Level Rd, Louisville, KY 40219",
    "lat": 38.165547,
    "lng": -85.679705,
    "description": "Family-owned Mexican restaurant serving authentic tacos, enchiladas, fajitas, and traditional Mexican favorites with fresh ingredients."
  },
  {
    "name": "Veronica's Mexican (Preston Hwy)",
    "address": "11470 Preston Hwy, Louisville, KY 40229",
    "lat": 38.0722831,
    "lng": -85.6693298,
    "description": "Second location of beloved family Mexican restaurant offering the same authentic dishes, fresh salsas, and generous portions."
  },
  {
    "name": "Wagner's Village Inn",
    "address": "22171 Main St, Oldenburg, IN 47036",
    "lat": 39.3440508,
    "lng": -85.207688,
    "description": "James Beard Award-winning country inn since 1968 in German-heritage Oldenburg. Famous for pan-fried chicken in hog fat and homemade desserts."
  },
  {
    "name": "Zamzam Restaurant",
    "address": "1808 Berry Blvd, Louisville, KY 40215",
    "lat": 38.2037813,
    "lng": -85.7766688,
    "description": "Somali restaurant with perfect 100 health score serving authentic dishes including mandi rice, grilled salmon, sambusas, and Somali-style pasta."
  }
];

        // Sort restaurants alphabetically by default
        restaurants.sort((a, b) => a.name.localeCompare(b.name));

        // Initialize map
        const map = L.map('map', {
            zoomControl: true,
            scrollWheelZoom: true
        }).setView([38.2, -85.72], 11);

        // Add tile layer
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 19
        }).addTo(map);

        // Custom marker icon
        const createMarkerIcon = () => {
            return L.divIcon({
                className: 'custom-marker-wrapper',
                html: `<div class="custom-marker">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                    </svg>
                </div>`,
                iconSize: [32, 32],
                iconAnchor: [16, 32],
                popupAnchor: [0, -32]
            });
        };

        // Create popup content
        const createPopupContent = (restaurant) => {
            const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(restaurant.name + ', ' + restaurant.address)}`;
            const directionsUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(restaurant.address)}`;

            return `
                <div class="popup-content">
                    <div class="popup-header">
                        <h3>${restaurant.name}</h3>
                    </div>
                    <div class="popup-body">
                        ${restaurant.description ? `<p class="popup-description">${restaurant.description}</p>` : ''}
                        <div class="popup-address">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                            </svg>
                            <span>${restaurant.address}</span>
                        </div>
                        <div class="popup-actions">
                            <a href="${googleMapsUrl}" target="_blank" class="popup-btn popup-btn-primary">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                                    <polyline points="15 3 21 3 21 9"/>
                                    <line x1="10" y1="14" x2="21" y2="3"/>
                                </svg>
                                View
                            </a>
                            <a href="${directionsUrl}" target="_blank" class="popup-btn popup-btn-secondary">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="3 11 22 2 13 21 11 13 3 11"/>
                                </svg>
                                Directions
                            </a>
                        </div>
                    </div>
                </div>
            `;
        };

        // Store markers for search functionality
        const markers = [];

        // Add markers to map
        restaurants.forEach(restaurant => {
            const marker = L.marker([restaurant.lat, restaurant.lng], {
                icon: createMarkerIcon()
            })
            .bindPopup(createPopupContent(restaurant), {
                closeButton: true,
                maxWidth: 300
            })
            .addTo(map);

            markers.push({
                marker,
                restaurant
            });
        });

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const restaurantCount = document.getElementById('restaurantCount');
        const mapViewBtn = document.getElementById('mapViewBtn');
        const listViewBtn = document.getElementById('listViewBtn');
        const mapEl = document.getElementById('map');
        const listViewEl = document.getElementById('listView');
        const restaurantList = document.getElementById('restaurantList');
        const sortSelect = document.getElementById('sortSelect');

        let currentView = 'map';
        let currentSearchQuery = '';

        // View Toggle
        function switchToMapView() {
            currentView = 'map';
            mapViewBtn.classList.add('active');
            listViewBtn.classList.remove('active');
            mapEl.classList.remove('hidden');
            listViewEl.classList.remove('active');
            map.invalidateSize();
        }

        function switchToListView() {
            currentView = 'list';
            listViewBtn.classList.add('active');
            mapViewBtn.classList.remove('active');
            mapEl.classList.add('hidden');
            listViewEl.classList.add('active');
            renderList();
        }

        mapViewBtn.addEventListener('click', switchToMapView);
        listViewBtn.addEventListener('click', switchToListView);

        // Create restaurant card HTML
        function createCardHTML(restaurant) {
            const directionsUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(restaurant.address)}`;

            return `
                <div class="restaurant-card" data-name="${restaurant.name}" data-lat="${restaurant.lat}" data-lng="${restaurant.lng}">
                    <div class="card-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <h3>${restaurant.name}</h3>
                        ${restaurant.description ? `<p class="card-description">${restaurant.description}</p>` : ''}
                        <p class="card-address">${restaurant.address}</p>
                    </div>
                    <div class="card-actions">
                        <button class="card-btn card-btn-map" title="Show on map" onclick="event.stopPropagation(); showOnMap('${restaurant.name}', ${restaurant.lat}, ${restaurant.lng})">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/>
                                <line x1="8" y1="2" x2="8" y2="18"/>
                                <line x1="16" y1="6" x2="16" y2="22"/>
                            </svg>
                        </button>
                        <a href="${directionsUrl}" target="_blank" class="card-btn card-btn-directions" title="Get directions" onclick="event.stopPropagation()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="3 11 22 2 13 21 11 13 3 11"/>
                            </svg>
                        </a>
                    </div>
                </div>
            `;
        }

        // Render list view
        function renderList() {
            let filtered = restaurants;

            // Filter by search
            if (currentSearchQuery) {
                filtered = restaurants.filter(r =>
                    r.name.toLowerCase().includes(currentSearchQuery) ||
                    r.address.toLowerCase().includes(currentSearchQuery)
                );
            }

            // Sort
            const sortBy = sortSelect.value;
            filtered.sort((a, b) => {
                if (sortBy === 'name') {
                    return a.name.localeCompare(b.name);
                } else {
                    return a.address.localeCompare(b.address);
                }
            });

            // Update count
            restaurantCount.textContent = `${filtered.length} spots`;

            // Render cards
            if (filtered.length === 0) {
                restaurantList.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                        </svg>
                        <h3>No restaurants found</h3>
                        <p>Try a different search term</p>
                    </div>
                `;
            } else {
                restaurantList.innerHTML = filtered.map(createCardHTML).join('');
            }

            // Add click handlers to cards
            document.querySelectorAll('.restaurant-card').forEach(card => {
                card.addEventListener('click', () => {
                    const name = card.dataset.name;
                    const lat = parseFloat(card.dataset.lat);
                    const lng = parseFloat(card.dataset.lng);
                    showOnMap(name, lat, lng);
                });
            });
        }

        // Show restaurant on map
        window.showOnMap = function(name, lat, lng) {
            switchToMapView();
            map.setView([lat, lng], 16);

            const markerData = markers.find(m => m.restaurant.name === name);
            if (markerData) {
                setTimeout(() => {
                    markerData.marker.openPopup();
                }, 300);
            }
        };

        // Sort change handler
        sortSelect.addEventListener('change', renderList);

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            currentSearchQuery = e.target.value.toLowerCase().trim();

            if (currentSearchQuery.length === 0) {
                searchResults.classList.remove('active');
                restaurantCount.textContent = `${restaurants.length} spots`;

                if (currentView === 'list') {
                    renderList();
                }
                return;
            }

            const filtered = restaurants.filter(r =>
                r.name.toLowerCase().includes(currentSearchQuery) ||
                r.address.toLowerCase().includes(currentSearchQuery)
            );

            restaurantCount.textContent = `${filtered.length} spots`;

            // Update list view if active
            if (currentView === 'list') {
                renderList();
            }

            // Show dropdown results (for map view mainly)
            if (filtered.length === 0) {
                searchResults.innerHTML = '<div class="no-results">No restaurants found</div>';
            } else {
                searchResults.innerHTML = filtered.slice(0, 8).map(r => `
                    <div class="search-result-item" data-lat="${r.lat}" data-lng="${r.lng}" data-name="${r.name}">
                        <h4>${r.name}</h4>
                        <p>${r.address}</p>
                    </div>
                `).join('');
            }

            searchResults.classList.add('active');
        });

        // Handle search result clicks
        searchResults.addEventListener('click', (e) => {
            const item = e.target.closest('.search-result-item');
            if (item) {
                const lat = parseFloat(item.dataset.lat);
                const lng = parseFloat(item.dataset.lng);
                const name = item.dataset.name;

                showOnMap(name, lat, lng);

                searchResults.classList.remove('active');
                searchInput.value = name;
                currentSearchQuery = name.toLowerCase();
            }
        });

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                searchResults.classList.remove('active');
            }
        });

        // Hide loading screen
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loading').classList.add('hidden');
            }, 500);
        });

        // Fit map to show all markers
        const bounds = L.latLngBounds(restaurants.map(r => [r.lat, r.lng]));
        map.fitBounds(bounds, { padding: [50, 50] });
    </script>

    <!-- GoatCounter Analytics -->
    <script data-goatcounter="https://uncleds.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
</body>
</html>
